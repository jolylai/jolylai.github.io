<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="JS Ajax"/>




  <meta name="keywords" content="JavaScript," />




  <link rel="alternate" href="/atom.xml" title="Jolylai">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.0.0" />



<link rel="canonical" href="http://yoursite.com/2018/01/14/JS-Ajax/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.0" />



  



    <title> JS Ajax · Jolylai </title>
  </head>

  <body>
    <div class="container">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Jolylai</a>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
          </a>
        </li>
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
          </a>
        </li>
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            Tags
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

<div class="mobile-navbar">
  <div class="mobile-header">
    <div class="mobile-header-logo">
      <a href="/." class="logo">Jolylai</a>
    </div>

    <div class="mobile-header-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <nav class="mobile-menu">
    
      
      <a class="mobile-menu-item" href="/">
        Home
      </a>
    
      
      <a class="mobile-menu-item" href="/archives/">
        Archives
      </a>
    
      
      <a class="mobile-menu-item" href="/tags">
        Tags
      </a>
    
  </nav>
</div>
      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          JS Ajax
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jan 14, 2018
        </span>
      </div>
    </header>

    
      <div class="post-toc" id="post-toc">
        <h2 class="post-toc-title">Contents</h2>
        <div class="post-toc-content">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#XHR-的用法"><span class="toc-text">XHR 的用法</span></a></li></ol>
        </div>
      </div>
    

    <div class="post-content">
      
        <p>Ajax &#x60F3;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x800C;&#x65E0;&#x9700;&#x5378;&#x8F7D;&#x9875;&#x9762;&#xFF0C;&#x5E26;&#x6765;&#x66F4;&#x597D;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;<br><a id="more"></a></p>
<h2 id="XHR-&#x7684;&#x7528;&#x6CD5;"><a href="#XHR-&#x7684;&#x7528;&#x6CD5;" class="headerlink" title="XHR &#x7684;&#x7528;&#x6CD5;"></a>XHR &#x7684;&#x7528;&#x6CD5;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</div><div class="line"><span class="comment">// readyState &#x5C5E;&#x6027;&#x7684;&#x503C;&#x6709;&#x4E00;&#x4E2A;&#x503C;&#x53D8;&#x6210;&#x53E6;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x90FD;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;readystatechange&#x4E8B;&#x4EF6;</span></div><div class="line"><span class="comment">// &#x5FC5;&#x987B;&#x5728;&#x8C03;&#x7528; open() &#x4E4B;&#x524D;&#x6307;&#x5B9A; onreadystatechange &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x624D;&#x80FD;&#x786E;&#x4FDD;&#x5938;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</span></div><div class="line">xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> {</div><div class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) {</div><div class="line">    <span class="comment">// 304&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x5E76;&#x6CA1;&#x6709;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x7F13;&#x51B2;&#x7684;&#x7248;&#x672C;</span></div><div class="line">    <span class="keyword">if</span> ((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) || xhr.status === <span class="number">304</span>) {</div><div class="line">      <span class="comment">// &#x6536;&#x5230;&#x54CD;&#x5E94;&#x540E;&#xFF0C;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5C31;&#x597D;&#x81EA;&#x52A8;&#x586B;&#x5145;XML&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;</span></div><div class="line">      <span class="comment">// &#x65E0;&#x8BBA;&#x5185;&#x5BB9;&#x7C7B;&#x578B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x54CD;&#x5E94;&#x4E3B;&#x4F53;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x4F1A;&#x5B58;&#x5230;responseText&#x5C5E;&#x6027;&#x4E2D;</span></div><div class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;responseText&apos;</span>, xhr.responseText);</div><div class="line">      <span class="comment">// &#x54CD;&#x5E94;&#x5185;&#x5BB9;&#x7C7B;&#x578B;&#x662F;&apos;text/xml&apos; &#x6216; &apos;application/xml&apos;</span></div><div class="line">      <span class="comment">// &#x975E;XML&#x6570;&#x636E;&#x65F6;&#xFF0C;responseXML&#x5C5E;&#x6027;&#x503C;&#x4E3A; null</span></div><div class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;responseXML&apos;</span>, xhr.responseXML);</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;status&apos;</span>, xhr.status);</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;statusText&apos;</span>, xhr.statusText);</div><div class="line">    } <span class="keyword">else</span> {</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;get error&apos;</span>);</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div><div class="line"><span class="comment">// open() &#x65B9;&#x6CD5;&#x5E76;&#x4E0D;&#x4F1A;&#x771F;&#x6B63;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x4EE5;&#x5907;&#x53D1;&#x9001;</span></div><div class="line">xhr.open(<span class="string">&apos;get&apos;</span>, <span class="string">&quot;http://localhost:3000/api/page/list?pageNumber=2&quot;</span>, <span class="literal">true</span>)</div><div class="line"><span class="comment">// &#x4F5C;&#x4E3A;&#x8BF7;&#x6C42;&#x4E3B;&#x4F53;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;</span></div><div class="line"><span class="comment">// &#x5982;&#x4E0D;&#x9700;&#x8981;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5FC5;&#x987B;&#x4F20;&#x5165;null&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5BF9;&#x67D0;&#x4E9B;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x5FC5;&#x987B;&#x7684;</span></div><div class="line">xhr.send(<span class="literal">null</span>)</div></pre></td></tr></table></figure>
<p>readyState</p>
<ul>
<li>0: &#x672A;&#x521D;&#x59CB;&#x5316;&#x3002;&#x5C1A;&#x672A;&#x8C03;&#x7528;open()</li>
<li>1: &#x542F;&#x52A8;&#x3002;&#x5DF2;&#x8C03;&#x7528; open(), &#x5C1A;&#x672A;&#x8C03;&#x7528; send()</li>
<li>2: &#x53D1;&#x9001;&#x3002;&#x5DF2;&#x8C03;&#x7528; send(), &#x5C1A;&#x672A;&#x63A5;&#x53D7;&#x5230;&#x54CD;&#x5E94;&#x3002;</li>
<li>3: &#x63A5;&#x6536;&#x3002;&#x63A5;&#x6536;&#x5230;<strong>&#x90E8;&#x5206;</strong>&#x54CD;&#x5E94;&#x6570;&#x636E;&#x3002;</li>
<li>4: &#x5B8C;&#x6210;&#x3002;&#x5DF2;&#x63A5;&#x6536;&#x5230;&#x5168;&#x90E8;&#x76F8;&#x5E94;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E14;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528;&#x3002;</li>
</ul>

      
    </div>

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/JavaScript/">JavaScript</a>
          
        </div>

        
  <nav class="post-nav">
    
    
      <a class="next" href="/2018/01/11/Note-Post请求/">
        <span class="next-text nav-default">Post请求</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    
  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>

        </div>  
      </main>

      <footer id="footer" class="footer">
  <div class="social-links">
    
      
        
          <a href="mailto:2635850288@qq.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/jolylai" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
        
          <a href="https://www.zhihu.com/people/since-new/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2016 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Jolylai</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    


  <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>

    <script type="text/javascript" src="/js/src/even.js?v=2.0.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.0.0"></script>

  </body>
</html>